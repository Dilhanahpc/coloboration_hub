<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Collaboration Hub · v2050</title>
  <style>
    /* ======= RESPONSIVE DESIGN ======= */
    @media (max-width: 900px) {
      .grid { grid-template-columns: 1fr; padding: 0 8px; }
      .sidebar { margin-bottom: 18px; }
      .main { grid-template-columns: 1fr; gap: 14px; }
      .hero { padding: 0 8px; }
    }
    @media (max-width: 700px) {
      .grid { padding: 0 2vw; gap: 8px; }
      .sidebar { border-radius: 14px; }
      .main { gap: 8px; }
      .card { border-radius: 14px; }
      .hero { padding: 0 2vw; }
      .banner .content { grid-template-columns: 1fr; padding: 18px 6px; gap: 8px; }
      .footglass { padding: 8px 8px; font-size: 13px; }
      .chat, .graph { min-height: 160px; }
      .messages { max-height: 100px; font-size: 12px; }
      .msg { font-size: 11px; }
      .composer { padding: 10px 6px 8px 6px; gap: 6px; }
      .btn { font-size: 12px; padding: 0 10px; }
      textarea.input { font-size: 12px; padding: 8px 10px; }
      .card .title { padding: 12px 10px; font-size: 15px; }
    }
    @media (min-width: 701px) {
      .main { grid-template-columns: 1.15fr .85fr; gap: 24px; }
      .chat, .graph { min-height: 360px; }
      .messages { max-height: 260px; font-size: 15px; }
      .msg { font-size: 14px; }
      .composer { padding: 14px; gap: 10px; }
      .btn { font-size: 15px; padding: 0 18px; }
      textarea.input { font-size: 15px; padding: 14px 16px; }
      .card .title { padding: 18px 20px; font-size: 17px; }
    }
    /* ======= RESET ======= */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; color: #e9f0ff; background: #0b0f17; overflow-x: hidden; }

    /* ======= THEME ======= */
    :root{
      --bg-0: #0b0f17;
      --bg-1: #0f1524;
      --glass: rgba(255,255,255,0.06);
      --stroke: rgba(255,255,255,0.10);
      --neon: #72e6ff;
      --neon-2: #7b61ff;
      --neon-3: #00ffa3;
      --danger: #ff5b6e;
      --muted: #9aa8c3;
      --shadow: 0 8px 40px rgba(0,0,0,.45);
      --radius-xl: 18px;
      --radius-2xl: 26px;
    }

    /* ======= BACKGROUND LAYERS ======= */
    .bg-gradient {
      position: fixed; inset: -40vmax; z-index: -3; filter: blur(120px) saturate(140%);
      background:
        radial-gradient(60vmax 60vmax at 20% 20%, rgba(123,97,255,.25), transparent 60%),
        radial-gradient(60vmax 60vmax at 80% 30%, rgba(0,255,163,.18), transparent 60%),
        radial-gradient(70vmax 70vmax at 50% 80%, rgba(114,230,255,.16), transparent 60%);
    }
    canvas#particles { position: fixed; inset: 0; z-index: -2; }

    /* ======= LAYOUT ======= */
    header {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: blur(12px); background: linear-gradient(180deg, rgba(15,21,36,.85), rgba(15,21,36,.35));
      border-bottom: 1px solid var(--stroke);
    }
    .nav {
      max-width: 1200px; margin: 0 auto; padding: 16px 24px; display: flex; align-items: center; gap: 20px;
    }
    .logo { font-weight: 800; letter-spacing: .6px; font-size: 18px; padding: 8px 14px; border-radius: 999px; background: linear-gradient(90deg, var(--neon), var(--neon-2)); color: #081018; box-shadow: 0 0 24px rgba(123,97,255,.35); }
    .nav a { color: var(--muted); text-decoration: none; padding: 10px 14px; border-radius: 12px; transition: .2s ease; border: 1px solid transparent; }
    .nav a:hover { color: #fff; border-color: var(--stroke); background: rgba(255,255,255,.04); }

    .grid {
      max-width: 1200px; margin: 28px auto; padding: 0 24px; display: grid; grid-template-columns: 280px 1fr; gap: 24px;
    }
    @media (max-width: 980px) { .grid { grid-template-columns: 1fr; } }

    /* ======= CARDS / PANELS ======= */
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--stroke); border-radius: var(--radius-2xl); box-shadow: var(--shadow);
    }
    .card .title { padding: 18px 20px; border-bottom: 1px solid var(--stroke); display:flex; align-items:center; gap:10px; }
    .title .dot { width: 10px; height: 10px; border-radius: 999px; background: var(--neon); box-shadow: 0 0 14px var(--neon); }

    /* ======= SIDEBAR: AGENT TOGGLES ======= */
    .sidebar { position: relative; overflow: hidden; }
    .sidebar .list { padding: 16px 16px 10px; display: grid; gap: 14px; }
    .agent { display:flex; align-items:center; justify-content: space-between; gap:12px; padding: 12px 14px; background: rgba(255,255,255,.03); border:1px solid var(--stroke); border-radius: 14px; }
    .agent .meta { display:flex; align-items:center; gap:12px; }
    .badge { font-size: 11px; letter-spacing: .4px; opacity:.85; padding: 4px 8px; border-radius: 999px; border: 1px solid var(--stroke); color:#cfe8ff; }
    .chip { font-size: 10px; padding: 3px 7px; border-radius: 999px; border:1px solid var(--stroke); color:#a6b6d6; }

    .switch { position: relative; width: 54px; height: 30px; background: #161a24; border-radius: 999px; border:1px solid var(--stroke); cursor: pointer; transition: .25s; }
    .switch::after { content:""; position:absolute; top: 3px; left: 3px; width: 24px; height: 24px; border-radius: 999px; background: linear-gradient(180deg, #20283a, #0f1524); box-shadow: inset 0 0 0 1px rgba(255,255,255,.08), 0 4px 12px rgba(0,0,0,.45); transition: .25s; }
    .switch.on { background: linear-gradient(90deg, var(--neon-3), var(--neon)); box-shadow: 0 0 16px rgba(0,255,163,.35); }
    .switch.on::after { transform: translateX(24px); background: #0b0f17; }

    /* ======= MAIN: GRAPH + CHAT ======= */
    .main { display: grid; grid-template-columns: 1.15fr .85fr; gap: 24px; }
    @media (max-width: 1200px) { .main { grid-template-columns: 1fr; } }

    .graph { position: relative; min-height: 360px; overflow: hidden; }
    canvas#graphCanvas { width: 100%; height: 420px; display:block; border-bottom-left-radius: var(--radius-2xl); border-bottom-right-radius: var(--radius-2xl); }

    .legend { display:flex; flex-wrap: wrap; gap: 10px; padding: 12px 16px 18px; }
    .legend .pill { padding: 6px 10px; border-radius: 999px; border:1px solid var(--stroke); background: rgba(255,255,255,.04); font-size: 12px; }

    .chat { display:flex; flex-direction: column; min-height: 420px; }
    .messages { padding: 16px; display: grid; gap: 12px; overflow: auto; max-height: 340px; }
    .msg { padding: 14px 16px; border-radius: 14px; border:1px solid var(--stroke); background: rgba(255,255,255,.04); position: relative; }
    .msg .from { font-size: 11px; letter-spacing: .3px; color: #b9c6e3; margin-bottom: 6px; display:flex; align-items:center; gap:8px; }
    .msg.user { border-color: rgba(123,97,255,.35); background: rgba(123,97,255,.08); }

    .composer { display:flex; gap: 10px; padding: 14px; border-top: 1px solid var(--stroke); }
    textarea.input {
      flex: 1;
      resize: none;
      min-height: 56px;
      max-height: 160px;
      padding: 14px 16px;
      border-radius: 14px;
      outline: none;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color:#fff;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    textarea.input::placeholder {
      text-align: left;
      opacity: 0.7;
      font-size: 0.85em;
      color: #b7c3dc;
      line-height: 1.3;
      letter-spacing: 0.01em;
    }
    .btn { border: 0; border-radius: 14px; padding: 0 18px; background: linear-gradient(90deg, var(--neon-2), var(--neon)); color:#041016; font-weight:700; cursor:pointer; display:inline-flex; align-items:center; gap:10px; box-shadow: 0 8px 36px rgba(114,230,255,.25);
      transition: transform .15s ease, filter .15s ease; }
    .btn:hover { transform: translateY(-1px); filter: brightness(1.1); }

    /* ======= UTIL ======= */
    .row { display:flex; align-items:center; justify-content: space-between; gap: 10px; }
    .muted { color: var(--muted); }
    .glow { text-shadow: 0 0 14px rgba(114,230,255,.35); }

    footer { max-width: 1200px; margin: 28px auto 60px; padding: 0 24px; color: var(--muted); display:flex; align-items:center; justify-content: space-between; gap: 16px; }
    .footglass { padding: 12px 16px; border:1px solid var(--stroke); border-radius: var(--radius-xl); background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); }

    /* Agent color accents */
    .accent-gpt { --accent: #7b61ff; }
    .accent-gemini { --accent: #00d4ff; }
    .accent-copilot { --accent: #00ffa3; }
    .accent-llama { --accent: #ffb703; }
  .accent-designer { --accent: #ff5b6e; }
  .accent-deepseek { --accent: #68f; }
  .accent-claude { --accent: #ffb4d6; }
  .accent-perplexity { --accent: #00e0ff; }
    .msg .accent { color: var(--accent); font-weight: 700; }
    .ring { width: 10px; height: 10px; border-radius: 999px; box-shadow: 0 0 12px var(--accent); background: var(--accent); }

    /* Fancy hero */
    .hero { max-width:1200px; margin: 20px auto 0; padding: 0 24px; }
    .hero .banner { position: relative; overflow: hidden; border-radius: var(--radius-2xl); border:1px solid var(--stroke); background: radial-gradient(120% 80% at 80% -10%, rgba(114,230,255,.18), transparent), radial-gradient(120% 100% at -20% 120%, rgba(123,97,255,.22), transparent), rgba(255,255,255,.04); }
    .banner .content { padding: 34px 28px; display:grid; grid-template-columns: 1.1fr .9fr; gap: 16px; align-items:center; }
    .banner h1 { margin:0; font-size: clamp(26px, 3.5vw, 44px); line-height: 1.05; }
    .banner p { margin: 10px 0 0; color:#cfe0ff; }
    .hero-orb { position:absolute; right:-60px; top:-60px; width:220px; height:220px; background: conic-gradient(from 0deg, var(--neon), var(--neon-2), var(--neon-3), var(--neon)); filter: blur(18px) saturate(150%); border-radius:50%; opacity:.55; animation: spin 12s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }

    .tiny { font-size: 11px; letter-spacing: .25px; color:#b7c3dc; }
  </style>
</head>
<body>
  <div class="bg-gradient"></div>
  <canvas id="particles"></canvas>

  <header>
    <nav class="nav">
      <div class="logo">AIC•Hub</div>
      <div style="flex:1"></div>
      <a href="#agents">Agents</a>
  <a href="about.html">About</a>
  <a href="login.html" class="auth-btn">Login</a>
  <a href="signup.html" class="auth-btn">Signup</a>


      
    </nav>
  </header>




  <!-- HERO -->
  <section class="hero">
    <div class="banner card">
      <div class="hero-orb"></div>
      <div class="content">
        <div>
          <h1 class="glow">Collaborate with <span style="color:var(--neon)">many AIs</span> — get one <span style="color:var(--neon-3)">optimal</span> answer.</h1>
          <p>Toggle expert agents (GPT, Gemini, Copilot, LLaMA, DeepSeek, Designer AI). Watch them debate, refine, and converge — visually.</p>
        </div>
        <div class="footglass">
          <div class="row"><span class="tiny">Status</span><span class="tiny">Simulated • Ready</span></div>
          <div class="row" style="margin-top:8px"><span class="tiny">Backend</span><span class="tiny" id="backendUrl">(not set)</span></div>
        </div>
      </div>
    </div>
  </section>

  <main class="grid" id="agents">
    <!-- SIDEBAR: AGENT TOGGLES -->
    <aside class="card sidebar">
      <div class="title"><span class="dot"></span><strong>Agents</strong><span class="muted">• enable/disable</span></div>
      <div class="list">
        <div class="agent accent-gpt"><div class="meta"><span class="ring"></span><div>
          <div><strong>ChatGPT</strong> <span class="chip">Reasoning</span></div>
          <div class="tiny">Generalist planner & explainer</div>
        </div></div><div class="switch on" data-agent="gpt"></div></div>

        <div class="agent accent-gemini"><div class="meta"><span class="ring"></span><div>
          <div><strong>Gemini</strong> <span class="chip">Research</span></div>
          <div class="tiny">Synthesis & breadth</div>
        </div></div><div class="switch on" data-agent="gemini"></div></div>

        <div class="agent accent-copilot"><div class="meta"><span class="ring"></span><div>
          <div><strong>Copilot</strong> <span class="chip">Code</span></div>
          <div class="tiny">Architecture & snippets</div>
        </div></div><div class="switch on" data-agent="copilot"></div></div>

        <div class="agent accent-llama"><div class="meta"><span class="ring"></span><div>
          <div><strong>LLaMA</strong> <span class="chip">Logic</span></div>
          <div class="tiny">Checklists & constraints</div>
        </div></div><div class="switch on" data-agent="llama"></div></div>

        <div class="agent accent-deepseek"><div class="meta"><span class="ring"></span><div>
          <div><strong>DeepSeek</strong> <span class="chip">Precision</span></div>
          <div class="tiny">Edge cases & risks</div>
        </div></div><div class="switch on" data-agent="deepseek"></div></div>

        <div class="agent accent-designer"><div class="meta"><span class="ring"></span><div>
          <div><strong>Designer</strong> <span class="chip">UX</span></div>
          <div class="tiny">Narrative & visuals</div>
        </div></div><div class="switch on" data-agent="designer"></div></div>

        <div class="agent accent-claude"><div class="meta"><span class="ring"></span><div>
          <div><strong>Claude.ai</strong> <span class="chip">Context</span></div>
          <div class="tiny">Long-context analysis & summaries</div>
        </div></div><div class="switch on" data-agent="claude"></div></div>

        <div class="agent accent-perplexity"><div class="meta"><span class="ring"></span><div>
          <div><strong>Perplexity</strong> <span class="chip">Web</span></div>
          <div class="tiny">Web search & up-to-date info</div>
        </div></div><div class="switch on" data-agent="perplexity"></div></div>
      </div>
    </aside>

    <!-- MAIN: GRAPH + CHAT -->
    <section class="main">
      <section class="card graph">
        <div class="title"><span class="dot"></span><strong>Agent Graph</strong><span class="muted">• live links</span></div>
        <canvas id="graphCanvas"></canvas>
        <div class="legend">
          <span class="pill">Pulsing node = active</span>
          <span class="pill">Link glow = collaboration</span>
          <span class="pill">Drag to orbit</span>
        </div>
      </section>

      <section class="card chat" id="chat">
        <div class="title"><span class="dot"></span><strong>Collaboration Chat</strong><span class="muted">• debate → converge</span></div>
        <div class="messages" id="messages">
          <div class="msg user"><div class="from">You</div><div>Ask anything… for example: <em>"Design an MVP for a solar-powered medical drone network in rural areas"</em>.</div></div>
        </div>
        <div class="composer">
          <textarea id="input" class="input" placeholder="Type your challenge. Agents will collaborate…"></textarea>
          <button class="btn" id="sendBtn">Send
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 12L20 12" stroke="#05121a" stroke-width="2" stroke-linecap="round"/><path d="M12 4L20 12L12 20" stroke="#05121a" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
        </div>
      </section>
    </section>
  </main>

  <footer id="about">
    <div class="footglass">© 2025 AIC•Hub — Multi‑model, agentic collaboration UI </div>
    <div class="tiny">Tip: Set your backend URL inside the script for real AI calls.</div>
  </footer>

  <script>
    // ===================== CONFIG =====================
    const BACKEND_URL = ""; // e.g., "https://your-api.example.com/collab/solve". If empty → simulate.
    document.getElementById('backendUrl').textContent = BACKEND_URL || 'simulation mode';

    // ===================== PARTICLE BACKGROUND =====================
    const pCanvas = document.getElementById('particles');
    const pCtx = pCanvas.getContext('2d');
    let P = [];
    function resizeParticles(){ pCanvas.width = innerWidth; pCanvas.height = innerHeight; }
    addEventListener('resize', resizeParticles); resizeParticles();
    for(let i=0;i<120;i++) P.push({ x: Math.random()*pCanvas.width, y: Math.random()*pCanvas.height, vx:(Math.random()-.5)*.3, vy:(Math.random()-.5)*.3, r: Math.random()*2.2+0.6 });
    function tickParticles(){
      pCtx.clearRect(0,0,pCanvas.width,pCanvas.height);
      for(const p of P){ p.x+=p.vx; p.y+=p.vy; if(p.x<0||p.x>pCanvas.width) p.vx*=-1; if(p.y<0||p.y>pCanvas.height) p.vy*=-1; }
      // lines
      for(let i=0;i<P.length;i++) for(let j=i+1;j<P.length;j++){
        const a = P[i], b=P[j]; const dx=a.x-b.x, dy=a.y-b.y; const d= Math.hypot(dx,dy);
        if(d<120){ const o = 1 - d/120; pCtx.strokeStyle = `rgba(114,230,255,${o*.12})`; pCtx.lineWidth = 1; pCtx.beginPath(); pCtx.moveTo(a.x,a.y); pCtx.lineTo(b.x,b.y); pCtx.stroke(); }
      }
      // dots
      for(const p of P){ pCtx.beginPath(); pCtx.arc(p.x,p.y,p.r,0,Math.PI*2); pCtx.fillStyle = 'rgba(255,255,255,.75)'; pCtx.fill(); }
      requestAnimationFrame(tickParticles);
    }
    tickParticles();

    // ===================== AGENT GRAPH =====================
    const graph = document.getElementById('graphCanvas');
    const g = graph.getContext('2d');
    function resizeGraph(){ graph.width = graph.clientWidth; graph.height = graph.clientHeight; }
    addEventListener('resize', resizeGraph); resizeGraph();

    const AGENTS = [
      { id:'gpt',     name:'ChatGPT',    color:'#7b61ff' },
      { id:'gemini',  name:'Gemini',     color:'#00d4ff' },
      { id:'copilot', name:'Copilot',    color:'#00ffa3' },
      { id:'llama',   name:'LLaMA',      color:'#ffb703' },
      { id:'deepseek',name:'DeepSeek',   color:'#6688ff' },
      { id:'designer',name:'Designer',   color:'#ff5b6e' },
      { id:'claude',  name:'Claude.ai',  color:'#ffb4d6' },
      { id:'perplexity',name:'Perplexity',color:'#00e0ff' },
    ];

    const nodes = AGENTS.map((a,i)=>({
      ...a,
      x: graph.width/2 + Math.cos((i/AGENTS.length)*Math.PI*2)* (graph.height/2.6),
      y: graph.height/2 + Math.sin((i/AGENTS.length)*Math.PI*2)* (graph.height/2.6),
      r: 18, vx:0, vy:0, active:true, pulse:0
    }));

    let drag = null;
    graph.addEventListener('mousedown', e=>{
      const rect = graph.getBoundingClientRect(); const x=e.clientX-rect.left, y=e.clientY-rect.top;
      for(const n of nodes){ if(Math.hypot(n.x-x, n.y-y) < n.r+4){ drag = { n, dx:n.x-x, dy:n.y-y }; break; } }
    });
    addEventListener('mouseup', ()=>drag=null);
    addEventListener('mousemove', e=>{
      if(!drag) return; const rect = graph.getBoundingClientRect(); const x=e.clientX-rect.left, y=e.clientY-rect.top; drag.n.x = x + drag.dx; drag.n.y = y + drag.dy; });

    function drawGraph(){
      g.clearRect(0,0,graph.width,graph.height);
      // links
      for(let i=0;i<nodes.length;i++) for(let j=i+1;j<nodes.length;j++){
        const a=nodes[i], b=nodes[j]; const d = Math.hypot(a.x-b.x, a.y-b.y); if(d<999){
          const glow = (a.active && b.active) ? 0.22 : 0.06; g.strokeStyle = `rgba(114,230,255,${glow})`; g.lineWidth = (a.active && b.active) ? 1.6 : 0.8; g.beginPath(); g.moveTo(a.x,a.y); g.lineTo(b.x,b.y); g.stroke();
        }
      }
      // nodes
      nodes.forEach(n=>{
        n.pulse = (n.pulse+0.02)%(Math.PI*2);
        const r = n.r + (n.active ? Math.sin(n.pulse)*2.5 : 0);
        const grd = g.createRadialGradient(n.x,n.y,2,n.x,n.y,r+14);
        const alpha = n.active ? .45 : .12;
        grd.addColorStop(0, n.color+"aa");
        grd.addColorStop(1, `rgba(0,0,0,0)`);
        g.fillStyle = grd; g.beginPath(); g.arc(n.x,n.y,r+14,0,Math.PI*2); g.fill();
        g.beginPath(); g.arc(n.x,n.y,r,0,Math.PI*2); g.fillStyle = n.color; g.fill();
        g.strokeStyle = 'rgba(255,255,255,.55)'; g.lineWidth=1; g.stroke();
        // label
        g.fillStyle = 'rgba(233,240,255,.95)'; g.font = '600 12px system-ui'; g.textAlign='center';
        g.fillText(n.name, n.x, n.y - r - 10);
      });
      requestAnimationFrame(drawGraph);
    }
    drawGraph();

    // ===================== TOGGLES =====================
    document.querySelectorAll('.switch').forEach(sw=>{
      sw.addEventListener('click',()=>{
        sw.classList.toggle('on');
        const id = sw.dataset.agent; const node = nodes.find(n=>n.id===id); if(node){ node.active = sw.classList.contains('on'); }
      });
    });

    // ===================== CHAT / COLLAB =====================
    const messages = document.getElementById('messages');
    const input = document.getElementById('input');
    const sendBtn = document.getElementById('sendBtn');

    function pushMessage(from, html, accent){
      const m = document.createElement('div'); m.className = 'msg';
      if(from==='You') m.classList.add('user');
      m.innerHTML = `<div class="from">${from==='You' ? from : `<span class="ring" style="--accent:${accent}"></span><span class="accent" style="--accent:${accent}">${from}</span>`}</div><div class="body">${html}</div>`;
      messages.appendChild(m); messages.scrollTop = messages.scrollHeight; return m.querySelector('.body');
    }

    function typeInto(el, text, speed=12){
      el.textContent=''; let i=0; return new Promise(res=>{ const t = setInterval(()=>{ el.textContent += text[i++]; messages.scrollTop = messages.scrollHeight; if(i>=text.length){ clearInterval(t); res(); } }, speed); });
    }

    async function sendQuery(){
      const q = input.value.trim(); if(!q) return; input.value = '';
      pushMessage('You', q);

      const active = nodes.filter(n=>n.active);
      if(active.length===0){ pushMessage('System', '<em>Enable at least one agent to collaborate.</em>', '#9aa8c3'); return; }

      if(BACKEND_URL){
        try{
          const res = await fetch(BACKEND_URL, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ task: q, context: '' }) });
          const data = await res.json();
          const merged = data.merged || 'No merged output.';
          const judgesay = data.judgment || '';
          // show improved drafts as separate agent messages if available
          (data.improved||[]).forEach((txt, idx)=>{
            const agent = active[idx % active.length]; const body = pushMessage(agent.name, '', agent.color); typeInto(body, txt, 8);
          });
          const finalBody = pushMessage('Orchestrator', '', '#72e6ff'); typeInto(finalBody, `Final synthesis →\n${merged}`, 8);
        }catch(err){
          pushMessage('System', `<span style="color:var(--danger)">Backend error:</span> ${String(err)}`, '#ff5b6e');
        }
      } else {
        // Simulation mode: generate stylized, role-specific drafts
        for(const ag of active){
          const body = pushMessage(ag.name, '', ag.color);
          const sample = simulateDraft(ag.id, q);
          await sleep(250 + Math.random()*250); await typeInto(body, sample, 8);
        }
        const finalBody = pushMessage('Orchestrator', '', '#72e6ff');
        await sleep(300);
        await typeInto(finalBody, synthesize(active.map(a=>a.id), q), 8);
      }
    }

    sendBtn.addEventListener('click', sendQuery);
    input.addEventListener('keydown', e=>{ if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); sendQuery(); } });

    // ===================== SIMULATION CONTENT =====================
    const samples = {
      gpt: (q)=>`Plan: break "${q}" into phases → discovery, constraints, MVP, validation.\n• Define success metrics\n• Identify hard blockers\n• Produce step-by-step owner map.`,
      gemini: (q)=>`Research snapshot for "${q}":\n– Trends • comparable case studies • data sources\n– Assumptions & unknowns worth testing in week 1.`,
      copilot: (q)=>`Code outline for orchestrator:\n- /collab/solve (FastAPI)\n- Provider adapters (OpenAI, Gemini, DeepSeek)\n- Debate → Judge → Merge pipeline\n- Caching & cost guardrails`,
      llama: (q)=>`Constraints matrix:\n[legal][safety][budget][latency]\nCreate evaluation checklist before shipping MVP for "${q}".`,
      deepseek: (q)=>`Edge cases • adversarial prompts • non-determinism\nAdd tests + temperature caps. Risk register attached.`,
      designer: (q)=>`Narrative & UX:\nCinematic onboarding → live agent graph → critique → final brief. Minimal friction, maximal clarity.`,
      claude: (q)=>`Long-context analysis for "${q}":\n• Summarize all relevant docs\n• Extract key entities, timelines, and risks\n• Suggest next steps based on context.`,
      perplexity: (q)=>`Web search for "${q}":\n- Latest news & research\n- Top sources\n- Concise synthesis of up-to-date info.`,
    };

    function simulateDraft(agentId, q){ return (samples[agentId]||(()=>`Thoughts on ${q}`))(q); }
    function synthesize(ids, q){
      return `Consensus for "${q}":\n1) Frame constraints early (LLAMA)\n2) Parallel research (Gemini) + planning (GPT)\n3) Build thin orchestrator (Copilot)\n4) Gate with risk checks (DeepSeek)\n5) Deliver with persuasive UX (Designer).\n→ Outcome: a credible MVP within 10–14 days.`;
    }
    const sleep = (ms)=> new Promise(r=>setTimeout(r, ms));


    function openModal(type){
      if(type==='login') document.getElementById('loginModal').style.display='flex';
      if(type==='signup') document.getElementById('signupModal').style.display='flex';
    }
    function closeModal(type){
      if(type==='login') document.getElementById('loginModal').style.display='none';
      if(type==='signup') document.getElementById('signupModal').style.display='none';
    }
    window.onclick = function(e){
      if(e.target.classList.contains('modal-bg')) e.target.style.display='none';
    }
 
  </script>
</body>
</html>